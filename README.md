<div align="center">

# <img src="docs/static/logo.png" width="45" align="center"> Save Any Bot

**ç®€ä½“ä¸­æ–‡** | [English](./README_en.md)

> **æŠŠ Telegram ä¸Šçš„æ–‡ä»¶è½¬å­˜åˆ°å¤šç§å­˜å‚¨ç«¯ã€‚æœ¬ç‰ˆæœ¬æ–°å¢åˆ†ç‰‡ä¸Šä¼ æ¥æ”¶ç«¯ï¼Œç”¨äºç»•è¿‡ Cloudflare 100MB é™åˆ¶å¹¶é€‚é… OpenList æœ¬åœ°å­˜å‚¨ã€‚**

[![Release Date](https://img.shields.io/github/release-date/Haruka041/SaveAny-Bot?label=release)](https://github.com/Haruka041/SaveAny-Bot/releases)
[![tag](https://img.shields.io/github/v/tag/Haruka041/SaveAny-Bot.svg)](https://github.com/Haruka041/SaveAny-Bot/releases)
[![Build Status](https://img.shields.io/github/actions/workflow/status/Haruka041/SaveAny-Bot/build-release.yml)](https://github.com/Haruka041/SaveAny-Bot/actions/workflows/build-release.yml)
[![Stars](https://img.shields.io/github/stars/Haruka041/SaveAny-Bot?style=flat)](https://github.com/Haruka041/SaveAny-Bot/stargazers)
[![Downloads](https://img.shields.io/github/downloads/Haruka041/SaveAny-Bot/total)](https://github.com/Haruka041/SaveAny-Bot/releases)
[![Issues](https://img.shields.io/github/issues/Haruka041/SaveAny-Bot)](https://github.com/Haruka041/SaveAny-Bot/issues)
[![Pull Requests](https://img.shields.io/github/issues-pr/Haruka041/SaveAny-Bot?label=pr)](https://github.com/Haruka041/SaveAny-Bot/pulls)
[![License](https://img.shields.io/github/license/Haruka041/SaveAny-Bot)](./LICENSE)

</div>

## æ¦‚è¿°

SaveAny-Bot æ˜¯ä¸€ä¸ª Telegram æœºå™¨äººï¼Œå¯å°† Telegram ä¸ç½‘ç«™çš„åª’ä½“å†…å®¹è½¬å­˜åˆ°å¤šç§å­˜å‚¨ç«¯ã€‚æœ¬ç‰ˆæœ¬åŠ å…¥äº†åˆ†ç‰‡æ¥æ”¶æœåŠ¡ï¼Œä¸“é—¨ç”¨äº OpenList æœ¬åœ°å­˜å‚¨çš„ç¨³å®šå¤§æ–‡ä»¶ä¸Šä¼ ï¼Œé¿å… Cloudflare çš„ 100MB è¯·æ±‚ä½“é™åˆ¶ã€‚

## ğŸ¯ ç‰¹æ€§

- æ”¯æŒæ–‡æ¡£/è§†é¢‘/å›¾ç‰‡/è´´çº¸â€¦ç”šè‡³è¿˜æœ‰ [Telegraph](https://telegra.ph/)
- ç ´è§£ç¦æ­¢ä¿å­˜çš„æ–‡ä»¶
- æ‰¹é‡ä¸‹è½½
- æµå¼ä¼ è¾“
- å¤šç”¨æˆ·ä½¿ç”¨
- åŸºäºå­˜å‚¨è§„åˆ™çš„è‡ªåŠ¨æ•´ç†
- ç›‘å¬å¹¶è‡ªåŠ¨è½¬å­˜æŒ‡å®šèŠå¤©çš„æ¶ˆæ¯, æ”¯æŒè¿‡æ»¤
- åœ¨ä¸åŒå­˜å‚¨ç«¯ä¹‹é—´è½¬å­˜æ–‡ä»¶
- é›†æˆ yt-dlp, ä»æ‰€æ”¯æŒçš„ç½‘ç«™ä¸‹è½½å¹¶è½¬å­˜åª’ä½“æ–‡ä»¶
- é›†æˆ Aria2, æ”¯æŒç›´é“¾/ç£åŠ›ä¸‹è½½å’Œè½¬å­˜
- ä½¿ç”¨ js ç¼–å†™è§£æå™¨æ’ä»¶ä»¥è½¬å­˜ä»»æ„ç½‘ç«™çš„æ–‡ä»¶
- å­˜å‚¨ç«¯æ”¯æŒ:
  - Alist
  - S3
  - WebDAV
  - æœ¬åœ°ç£ç›˜
  - Telegram (é‡ä¼ å›æŒ‡å®šèŠå¤©)

## æœ¬ç‰ˆæœ¬æ–°å¢åŠŸèƒ½ï¼ˆåˆ†ç‰‡ä¸Šä¼ ï¼‰

- WebDAV å­˜å‚¨æ–°å¢ `receiver_url`ï¼Œå°†ä¸Šä¼ è½¬å‘åˆ°åˆ†ç‰‡æ¥æ”¶ç«¯ã€‚
- æ–­ç‚¹ç»­ä¼ ï¼ˆæœåŠ¡ç«¯æ ¡éªŒ offsetï¼‰ã€‚
- staging â†’ final åŸå­ç§»åŠ¨ï¼Œå®Œæˆåæ‰å¯¹å¤–å¯è§ã€‚
- ä¸Šä¼ æ¸…å•ä¸æ—¥å¿—è®°å½•ã€‚
- è‡ªåŠ¨æ¸…ç†è¿‡æœŸçš„ staging æ–‡ä»¶ã€‚

## åˆ†ç‰‡ä¸Šä¼ æµç¨‹

1. Bot ç«¯æŠŠæ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ åˆ°æ¥æ”¶ç«¯ï¼ˆ`/upload_chunk`ï¼‰ã€‚
2. æ¥æ”¶ç«¯å†™å…¥ staging å¹¶è®°å½•è¿›åº¦ã€‚
3. Bot ç«¯è°ƒç”¨ `/complete`ï¼Œæ¥æ”¶ç«¯å°†æ–‡ä»¶ç§»åŠ¨åˆ° OpenList æœ¬åœ°ç›®å½•ã€‚

## å¿«é€Ÿå¼€å§‹ï¼ˆåˆ†ç‰‡ä¸Šä¼ ï¼‰

### 1) å¯åŠ¨æ¥æ”¶ç«¯ï¼ˆDockerï¼‰

```bash
cd file-receiver
docker compose up -d --build
```

### 2) é…ç½®å­˜å‚¨

```toml
[[storages]]
name = "OpenList"
type = "webdav"
enable = true
base_path = "/"
receiver_url = "http://<receiver-host>:8080"
chunk_size_mb = 10
chunk_retries = 3

# å¦‚æœä»éœ€ WebDAV çš„åˆ—ç›®å½•/è¯»å–åŠŸèƒ½å¯ä¿ç•™:
# url = "https://example.com/dav"
# username = "username"
# password = "password"
```

### 3) å¯åŠ¨ Bot

```bash
go run ./cmd
```

## æ¥æ”¶ç«¯ç¯å¢ƒå˜é‡

- `FINAL_DIR`: æœ€ç»ˆç›®å½•ï¼ˆOpenList æœ¬åœ°å­˜å‚¨è·¯å¾„ï¼‰
- `STAGING_DIR`: åˆ†ç‰‡ä¸´æ—¶ç›®å½•
- `MANIFEST_DIR`: ä¸Šä¼ æ¸…å•ç›®å½•
- `LOG_PATH`: ä¸Šä¼ æ—¥å¿—
- `STAGING_TTL_HOURS`: è¿‡æœŸæ¸…ç†æ—¶é—´ï¼ˆå°æ—¶ï¼‰

## é¸£è°¢

- [gotd](https://github.com/gotd/td)
- [TG-FileStreamBot](https://github.com/EverythingSuckz/TG-FileStreamBot)
- [gotgproto](https://github.com/celestix/gotgproto)
- [tdl](https://github.com/iyear/tdl)
- All the dependencies, contributors and users.
